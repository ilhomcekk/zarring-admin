import{j as e,r as h,B as G}from"./index-DVCylq0Q.js";import{a as v,c as k}from"./index.es-D1a6A4w_.js";import{C as R,a as T,b as F,c as B,d as E}from"./CModalTitle-DGooZh2_.js";import{C as V,a as p}from"./CRow-DsUHbXhC.js";import{C as w}from"./DefaultLayout-DZ7uc0CW.js";import{C as L,a as z}from"./CListGroupItem-C5LCyosc.js";import{b as D}from"./banner-TnnKUqNw.js";import{B as W}from"./auth-COeWrjcC.js";import{C as u}from"./CFormInput-DSAYN9JZ.js";import{C as A}from"./CForm-D11q0zH3.js";import{C as H}from"./CFormLabel-hzNGrAC8.js";import{C as K}from"./CInputGroup-xpHWjSDn.js";import"./index-BykZOzjs.js";import{P as Z}from"./PageLoading-BzyQkLAF.js";import{s as q}from"./stats-s89KGG0z.js";import{C as O,a as J,b as I,c as m,d as Q,e as U}from"./CTable-_oTpxpYH.js";import{c as X}from"./cil-zoom-CDkY_4k-.js";import{C as Y,a as M}from"./CPaginationItem-Km6D7boB.js";import{c as $}from"./cil-arrow-left-D66Kb3Zq.js";import{c as ee}from"./cil-arrow-right-CuetXaPY.js";import{C as se}from"./CCard-DsvGdDII.js";import{C as ae}from"./CCardHeader-TZ1QTRXN.js";import{C as le}from"./CCardTitle-CXhH0zEy.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-BybLwgQS.js";import"./CFormControlValidation-R1UaZUmp.js";const ne=({visible:d,onClose:t,item:o})=>e.jsxs(R,{size:"xl",visible:d,onClose:t,backdrop:"static",children:[e.jsx(T,{children:e.jsxs(F,{children:["ID: ( ",o==null?void 0:o.order_id," )"]})}),e.jsx(B,{children:e.jsxs(V,{xs:{gutter:2},children:[e.jsx(p,{xs:{span:6},children:e.jsx(w,{className:"p-2 m-0",color:"primary",children:"Заказ ИД"})}),e.jsx(p,{xs:{span:6},children:e.jsx(L,{children:e.jsx(z,{className:"p-2",children:o==null?void 0:o.order_id})})}),e.jsx(p,{xs:{span:6},children:e.jsx(w,{className:"p-2 m-0",color:"primary",children:"Имя"})}),e.jsx(p,{xs:{span:6},children:e.jsx(L,{children:e.jsx(z,{className:"p-2",children:o==null?void 0:o.name})})}),e.jsx(p,{xs:{span:6},children:e.jsx(w,{className:"p-2 m-0",color:"primary",children:"Номер телефона"})}),e.jsx(p,{xs:{span:6},children:e.jsx(L,{children:e.jsx(z,{className:"p-2",children:o==null?void 0:o.number})})}),e.jsx(p,{xs:{span:6},children:e.jsx(w,{className:"p-2 m-0",color:"primary",children:"Количество товаров"})}),e.jsx(p,{xs:{span:6},children:e.jsx(L,{children:e.jsx(z,{className:"p-2",children:o==null?void 0:o.product_count})})})]})})]}),re=({visible:d,onClose:t,id:o})=>{var i;const{detail:x,getDetail:N,getList:P,edit:j,editLoading:g}=D(),[c,l]=h.useState({name_ru:"",name_uz:"",img:null}),[C,S]=h.useState(!1),b=a=>{const{name:s,value:r}=a.target;l({...c,[s]:r})},y=(a,s)=>{const r=a.target.files[0];l({...c,[s]:r})};h.useEffect(()=>{d&&N(o)},[d]),h.useEffect(()=>{l(()=>{var a,s,r;return{name_ru:(a=x==null?void 0:x.dataValues)==null?void 0:a.name_ru,name_uz:(s=x==null?void 0:x.dataValues)==null?void 0:s.name_uz,img:(r=x==null?void 0:x.dataValues)==null?void 0:r.img}})},[x]);const _=[{label:"Имя ( RU )",children:e.jsx(u,{name:"name_ru",onChange:b,value:c==null?void 0:c.name_ru,required:!0})},{label:"Имя ( UZ )",children:e.jsx(u,{name:"name_uz",onChange:b,value:c==null?void 0:c.name_uz})},{label:"Основное изображение",children:e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"file",onChange:a=>y(a,"img"),disabled:c==null?void 0:c.img}),e.jsx(v,{color:"danger",onClick:()=>l(a=>({...a,img:""})),children:"Удалить изображение"}),typeof c.img=="string"&&e.jsx("div",{className:"w-100",children:e.jsx("img",{src:W+(c==null?void 0:c.img),alt:"Uploaded",style:{maxWidth:"300px"}})}),((i=c.img)==null?void 0:i.name)&&e.jsx("div",{className:"w-100",children:e.jsx("img",{src:URL.createObjectURL(c.img),alt:"Uploaded",style:{maxWidth:"300px"}})})]})}],n=a=>{a.preventDefault(),a.currentTarget.checkValidity()===!1?(a.preventDefault(),a.stopPropagation()):j(o,c).then(r=>{var f;console.log(r,"asdasdas"),(f=r==null?void 0:r.data)!=null&&f.id&&(toast.success("Успешно создано"),P({page:1,pageSize:20}),t())}).catch(r=>console.log("err",r)),S(!0)};return e.jsxs(R,{size:"xl",visible:d,onClose:t,backdrop:"static",children:[e.jsx(T,{children:e.jsx(F,{children:"Создать товар"})}),e.jsx(B,{children:e.jsxs(A,{noValidate:!0,validated:C,onSubmit:n,children:[_==null?void 0:_.map((a,s)=>e.jsxs("div",{className:"mt-2",children:[e.jsx(H,{children:a.label}),e.jsx(K,{children:a.children})]},s)),e.jsxs(E,{children:[e.jsx(v,{color:"secondary",onClick:t,children:"Закрыть"}),e.jsx(v,{color:"primary",type:"submit",disabled:g,children:"Сохранить"})]})]})})]})},oe=()=>{var a;const{getUsersProducts:d,usersProducts:t,remove:o,deleteLoading:x,listLoading:N}=q(),[P,j]=h.useState({}),[g,c]=h.useState(null),[l,C]=h.useState({page:1,pageSize:20,order_id:null,name:null,number:null,product_count:null}),[S,b]=h.useState(!1),[y,_]=h.useState(!1),n=(s,r)=>{C(f=>({...f,page:1,[s]:r||null}))},i=s=>{s.key==="Enter"&&d(l)};return h.useEffect(()=>{d(l)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(O,{striped:!0,children:[e.jsxs(J,{children:[e.jsxs(I,{children:[e.jsx(m,{scope:"col",children:"Заказ ИД"}),e.jsx(m,{scope:"col",children:"Имя"}),e.jsx(m,{scope:"col",children:"Номер телефона"}),e.jsx(m,{scope:"col",children:"Количество товаров"}),e.jsx(m,{scope:"col"})]}),e.jsxs(I,{children:[e.jsx(m,{scope:"col",children:e.jsx(u,{type:"text",value:l==null?void 0:l.order_id,onChange:s=>n("order_id",s.target.value),onKeyPress:i})}),e.jsx(m,{scope:"col",children:e.jsx(u,{type:"text",value:l==null?void 0:l.name,onChange:s=>n("name",s.target.value),onKeyPress:i})}),e.jsx(m,{scope:"col",children:e.jsx(u,{type:"text",value:l==null?void 0:l.number,onChange:s=>n("number",s.target.value),onKeyPress:i})}),e.jsx(m,{scope:"col",children:e.jsx(u,{type:"text",value:l==null?void 0:l.product_count,onChange:s=>n("product_count",s.target.value),onKeyPress:i})}),e.jsx(m,{scope:"col"})]})]}),e.jsxs(Q,{children:[(a=t==null?void 0:t.rows)==null?void 0:a.map((s,r)=>e.jsxs(I,{children:[e.jsx(m,{scope:"row",children:s==null?void 0:s.order_id}),e.jsx(U,{children:s==null?void 0:s.name}),e.jsx(U,{children:s==null?void 0:s.number}),e.jsx(U,{children:s==null?void 0:s.product_count}),e.jsx(U,{children:e.jsx("div",{className:"d-flex",children:e.jsx(v,{color:"primary",onClick:()=>{j(s),b(!0)},children:e.jsx(k,{icon:X})})})})]},r)),e.jsxs(Y,{children:[e.jsx(M,{onClick:()=>{const s={...l};s.page-=1,C(s),d(s)},disabled:l.page===1,children:e.jsx(k,{icon:$})}),[...Array(t==null?void 0:t.totalPages)].map((s,r)=>e.jsx(M,{onClick:()=>{const f={...l};f.page=r+1,C(f),d(f)},active:l.page===r+1,children:r+1},r)),e.jsx(M,{onClick:()=>{const s={...l};s.page+=1,C(s),d(s)},disabled:l.page===(t==null?void 0:t.totalPages),children:e.jsx(k,{icon:ee})})]})]})]})}),e.jsx(ne,{visible:S,onClose:()=>b(!1),item:P}),e.jsx(re,{visible:y,onClose:()=>_(!1),id:g}),e.jsx(Z,{loading:N})]})},ce=({visible:d,onClose:t})=>{const{create:o,createLoading:x,getList:N,list:P}=D(),[j,g]=h.useState({name_ru:"",name_uz:"",img:null}),[c,l]=h.useState(!1),C=()=>{g({name_ru:"",name_uz:"",img:null})},S=n=>{const{name:i,value:a}=n.target;g({...j,[i]:a})},b=(n,i)=>{const a=n.target.files[0];g({...j,[i]:a})},y=[{label:"Имя ( RU )",children:e.jsx(u,{name:"name_ru",value:j.name_ru,onChange:S,required:!0})},{label:"Имя ( UZ )",children:e.jsx(u,{name:"name_uz",value:j.name_uz,onChange:S})},{label:"Основное изображение",children:e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"file",onChange:n=>b(n,"img")}),e.jsx(v,{color:"danger",onClick:()=>g(n=>({...n,img:null})),children:"Удалить"}),j.img&&e.jsx("div",{className:"w-100",children:e.jsx("img",{src:URL.createObjectURL(j.img),alt:"Uploaded",style:{maxWidth:"300px"}})})]})}],_=n=>{n.preventDefault(),n.currentTarget.checkValidity()===!1?(n.preventDefault(),n.stopPropagation()):o(j).then(a=>{var s;(s=a==null?void 0:a.data)!=null&&s.id&&(G.success("Успешно создано"),N({page:1,pageSize:20}),C(),t())}).catch(a=>console.log("err",a)),l(!0)};return e.jsxs(R,{size:"xl",visible:d,onClose:t,backdrop:"static",children:[e.jsx(T,{children:e.jsx(F,{children:"Создать категории"})}),e.jsx(B,{children:e.jsxs(A,{noValidate:!0,validated:c,onSubmit:_,children:[y==null?void 0:y.map((n,i)=>e.jsxs("div",{className:"mt-2",children:[e.jsx(H,{children:n.label}),e.jsx(K,{children:n.children})]},i)),e.jsxs(E,{children:[e.jsx(v,{color:"secondary",children:"Закрыть"}),e.jsx(v,{color:"primary",type:"submit",disabled:x,children:"Сохранить"})]})]})})]})},Re=()=>{const[d,t]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:e.jsx(V,{children:e.jsx(p,{className:"d-flex align-items-center",children:e.jsx(le,{className:"mb-0",children:"Категории"})})})}),e.jsx(oe,{})]}),e.jsx(ce,{visible:d,onClose:()=>t(!1)})]})};export{Re as default};
