import{r as h,_ as A,R as l,b as E,c as J,P as r,d as T,j as e}from"./index-eW-6yITB.js";import{c as m}from"./index.es-1QyywiA-.js";import{C as g,a as w}from"./index.esm-BidzDRie.js";import{a as u,C as W}from"./CRow-3m-4mWST.js";import{C as B}from"./CCard-Czglc9r9.js";import{C as F}from"./CCardBody--XtPIz-t.js";import{C as S}from"./CCardHeader-CzZi6ULY.js";import{c as L,a as O,b as D}from"./cib-twitter-00_H7eLt.js";import{c as P,a as N}from"./cil-options-D9Lx3KRl.js";import{c as H,r as v}from"./auth-CBhP_LvO.js";import{l as M,m as k,n as R,o as d}from"./DefaultLayout-Bz4MAgCX.js";var C=h.forwardRef(function(a,t){var s,f=a.action,i=a.chart,o=a.className,n=a.color,c=a.title,y=a.value,x=A(a,["action","chart","className","color","title","value"]);return l.createElement(B,E({className:J((s={},s["bg-".concat(n)]=n,s["text-white"]=n,s),o)},x,{ref:t}),l.createElement(F,{className:"pb-0 d-flex justify-content-between align-items-start"},l.createElement("div",null,y&&l.createElement("div",{className:"fs-4 fw-semibold"},y),c&&l.createElement("div",null,c)),f),i)});C.propTypes={action:r.node,chart:r.oneOfType([r.string,r.node]),className:r.string,color:T,title:r.oneOfType([r.string,r.node]),value:r.oneOfType([r.string,r.node,r.number])};C.displayName="CWidgetStatsA";var p=h.forwardRef(function(a,t){var s,f=a.className,i=a.chart,o=a.color,n=a.icon,c=a.values,y=A(a,["className","chart","color","icon","values"]);return l.createElement(B,E({className:f},y,{ref:t}),l.createElement(S,{className:J("position-relative d-flex justify-content-center align-items-center",(s={},s["bg-".concat(o)]=o,s))},n,i),l.createElement(F,{className:"row text-center"},c&&c.map(function(x,j){return l.createElement(l.Fragment,{key:j},j%2!==0&&l.createElement("div",{className:"vr"}),l.createElement(u,null,l.createElement("div",{className:"fs-5 fw-semibold"},x.value),l.createElement("div",{className:"text-uppercase text-body-secondary small"},x.title)))})))});p.propTypes={chart:r.oneOfType([r.string,r.node]),className:r.string,color:T,icon:r.oneOfType([r.string,r.node]),values:r.arrayOf(r.any)};p.displayName="CWidgetStatsD";const I=a=>{const t={elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}}};return e.jsxs(W,{className:a.className,xs:{gutter:4},children:[e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(p,{...a.withCharts&&{chart:e.jsx(g,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[65,59,84,84,51,55,40],fill:!0}]},options:t})},icon:e.jsx(m,{icon:L,height:52,className:"my-4 text-white"}),values:[{title:"friends",value:"89K"},{title:"feeds",value:"459"}],style:{"--cui-card-cap-bg":"#3b5998"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(p,{...a.withCharts&&{chart:e.jsx(g,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[1,13,9,17,34,41,38],fill:!0}]},options:t})},icon:e.jsx(m,{icon:O,height:52,className:"my-4 text-white"}),values:[{title:"followers",value:"973k"},{title:"tweets",value:"1.792"}],style:{"--cui-card-cap-bg":"#00aced"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(p,{...a.withCharts&&{chart:e.jsx(g,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[78,81,80,45,34,12,40],fill:!0}]},options:t})},icon:e.jsx(m,{icon:D,height:52,className:"my-4 text-white"}),values:[{title:"contacts",value:"500"},{title:"feeds",value:"1.292"}],style:{"--cui-card-cap-bg":"#4875b4"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(p,{color:"warning",...a.withCharts&&{chart:e.jsx(g,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[35,23,56,22,97,23,64],fill:!0}]},options:t})},icon:e.jsx(m,{icon:P,height:52,className:"my-4 text-white"}),values:[{title:"events",value:"12+"},{title:"meetings",value:"4"}]})})]})};I.propTypes={className:r.string,withCharts:r.bool};var b=function(a,t){if(!(typeof window>"u")&&!(typeof document>"u")){var s=document.body;return window.getComputedStyle(s,null).getPropertyValue(a).replace(/^\s/,"")}};const q={list:[],clientsMaxCount:[],productsMaxCount:[],listLoading:!1},K=H(a=>({...q,getList:async t=>{a({listLoading:!0});try{const{data:s}=await v.fetchStats(t);return a({list:s==null?void 0:s.data}),s}catch(s){return s}finally{a({listLoading:!1})}},getClientsMaxCount:async()=>{a({listLoading:!0});try{const{data:t}=await v.fetchClientsMaxCount();return a({clientsMaxCount:t==null?void 0:t.data}),t}catch(t){return t}finally{a({listLoading:!1})}},getProductsMaxCount:async()=>{a({listLoading:!0});try{const{data:t}=await v.fetchProductsMaxCount();return a({productsMaxCount:t==null?void 0:t.data}),t}catch(t){return t}finally{a({listLoading:!1})}}})),V=a=>{var n,c;const{list:t,clientsMaxCount:s,productsMaxCount:f}=K();console.log(s);const i=h.useRef(null),o=h.useRef(null);return h.useEffect(()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{i.current&&setTimeout(()=>{i.current.data.datasets[0].pointBackgroundColor=b("--cui-primary"),i.current.update()}),o.current&&setTimeout(()=>{o.current.data.datasets[0].pointBackgroundColor=b("--cui-info"),o.current.update()})})},[i,o]),e.jsxs(W,{className:a.className,xs:{gutter:4},children:[e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"primary",value:e.jsxs(e.Fragment,{children:[(n=t==null?void 0:t.reportAll)==null?void 0:n.totalOrdersCount," "]}),title:"Заказы",action:e.jsxs(M,{alignment:"end",children:[e.jsx(k,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:N})}),e.jsxs(R,{children:[e.jsx(d,{children:"Action"}),e.jsx(d,{children:"Another action"}),e.jsx(d,{children:"Something else here..."}),e.jsx(d,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(w,{ref:i,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:b("--cui-primary"),data:[65,59,84,84,51,55,40]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:30,max:89,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"info",value:e.jsxs(e.Fragment,{children:[(c=t==null?void 0:t.reportAll)==null?void 0:c.totalOrdersAmount," "]}),title:"Сумма",action:e.jsxs(M,{alignment:"end",children:[e.jsx(k,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:N})}),e.jsxs(R,{children:[e.jsx(d,{children:"Action"}),e.jsx(d,{children:"Another action"}),e.jsx(d,{children:"Something else here..."}),e.jsx(d,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(w,{ref:o,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:b("--cui-info"),data:[1,18,9,17,34,22,11]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:-9,max:39,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})})]})};V.propTypes={className:r.string,withCharts:r.bool};export{V as W,I as a,b as g,K as s};
